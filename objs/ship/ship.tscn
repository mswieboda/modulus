[gd_scene load_steps=22 format=3 uid="uid://bayc08vbvk1bo"]

[ext_resource type="Script" uid="uid://b3nkvyjk8qajj" path="res://objs/ship/ship.gd" id="1_lmpqp"]
[ext_resource type="Texture2D" uid="uid://c8ln3ug7m2ek0" path="res://assets/images/crosshair.png" id="3_4geug"]
[ext_resource type="PackedScene" uid="uid://d2a0t4o0m4scl" path="res://objs/ship/ship.blend" id="3_g2y22"]
[ext_resource type="AudioStream" uid="uid://b1u8yeoh8r7qh" path="res://assets/sounds/mining_laser.wav" id="4_4geug"]
[ext_resource type="AudioStream" uid="uid://c24soh2jtaejp" path="res://assets/sounds/asteroid_grinding.wav" id="4_ucffe"]

[sub_resource type="BoxShape3D" id="BoxShape3D_a061m"]
size = Vector3(2, 2, 13)

[sub_resource type="BoxShape3D" id="BoxShape3D_18gon"]
size = Vector3(4, 1, 8)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_a061m"]
radius = 0.1
height = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a061m"]
albedo_color = Color(1, 0.4392157, 0, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_a061m"]
height = 3.0
radius = 7.0

[sub_resource type="Curve" id="Curve_a061m"]
_data = [Vector2(0.018348627, 0.97752815), 0.0, -1.004898, 0, 0, Vector2(1, 0), -1.0085927, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_g2y22"]
curve = SubResource("Curve_a061m")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_4geug"]
direction = Vector3(0, -1, 0)
spread = 0.0
initial_velocity_min = 1.0
initial_velocity_max = 1.0
gravity = Vector3(0, 0, 0)
scale_curve = SubResource("CurveTexture_g2y22")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ucffe"]
transparency = 1
albedo_color = Color(0, 1, 1, 0.5803922)

[sub_resource type="CylinderMesh" id="CylinderMesh_iqs6a"]
material = SubResource("StandardMaterial3D_ucffe")
height = 4.0

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_a061m"]
emission_shape_offset = Vector3(0, 250, 0)
emission_shape = 6
emission_ring_axis = Vector3(0, 1, 0)
emission_ring_height = 1.0
emission_ring_radius = 50.0
emission_ring_inner_radius = 10.0
emission_ring_cone_angle = 90.0
direction = Vector3(0, -1, 0)
spread = 0.0
initial_velocity_min = 300.0
initial_velocity_max = 300.0
gravity = Vector3(0, 0, 0)

[sub_resource type="CylinderMesh" id="CylinderMesh_g2y22"]
top_radius = 0.1
bottom_radius = 0.1
height = 50.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g2y22"]
shading_mode = 0
albedo_color = Color(0, 1, 1, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_a061m"]
material = SubResource("StandardMaterial3D_g2y22")
top_radius = 0.15
bottom_radius = 0.6

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4geug"]
shading_mode = 0
albedo_color = Color(0.8, 0, 0, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_g2y22"]
material = SubResource("StandardMaterial3D_4geug")
radius = 0.15

[node name="ship" type="Node3D"]
script = ExtResource("1_lmpqp")

[node name="ship_body" type="CharacterBody3D" parent="."]

[node name="collision_body" type="CollisionShape3D" parent="ship_body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.046903133, -2.4354048)
shape = SubResource("BoxShape3D_a061m")

[node name="collision_left_wing" type="CollisionShape3D" parent="ship_body"]
transform = Transform3D(0.37362146, -0.23556614, -0.89717066, 0.09056112, 0.9718583, -0.21746287, 0.92314965, -1.6115866e-08, 0.3844402, -4.104, 0, 0.012)
shape = SubResource("BoxShape3D_18gon")

[node name="collision_right_wing" type="CollisionShape3D" parent="ship_body"]
transform = Transform3D(0.3932818, 0.18815194, 0.89996016, -0.0067423624, 0.979401, -0.20181394, -0.9193933, 0.07330191, 0.38644916, 4.104, 0, -0.012)
shape = SubResource("BoxShape3D_18gon")

[node name="mesh" parent="ship_body" instance=ExtResource("3_g2y22")]

[node name="mine_gun" type="Node3D" parent="ship_body"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, -0.39069366, -9.379976)

[node name="laser" type="MeshInstance3D" parent="ship_body/mine_gun"]
visible = false
mesh = SubResource("CapsuleMesh_a061m")
surface_material_override/0 = SubResource("StandardMaterial3D_a061m")

[node name="crosshair" type="Sprite3D" parent="ship_body/mine_gun"]
transform = Transform3D(0.03, 0, 0, 0, 0.03, 0, 0, 0, 0.03, 0, 500, 0)
billboard = 1
fixed_size = true
texture = ExtResource("3_4geug")

[node name="asteroid_grind_audio" type="AudioStreamPlayer3D" parent="ship_body/mine_gun/crosshair"]
stream = ExtResource("4_ucffe")
volume_db = 30.0

[node name="audio" type="AudioStreamPlayer3D" parent="ship_body/mine_gun"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, -9.379976, 0.39069325)
stream = ExtResource("4_4geug")
volume_db = 10.0

[node name="laser_raycast_point" type="Node3D" parent="ship_body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4310854, -8.99767)

[node name="area" type="Area3D" parent="ship_body" groups=["player"]]

[node name="collision" type="CollisionShape3D" parent="ship_body/area"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.7157736)
shape = SubResource("CylinderShape3D_a061m")

[node name="engine_trails" type="Node3D" parent="ship_body"]

[node name="GPUParticles3D" type="GPUParticles3D" parent="ship_body/engine_trails"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, -3.6937275, -0.6861876, -1.0604775)
amount = 32
lifetime = 0.2
process_material = SubResource("ParticleProcessMaterial_4geug")
draw_pass_1 = SubResource("CylinderMesh_iqs6a")

[node name="GPUParticles3D2" type="GPUParticles3D" parent="ship_body/engine_trails"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, -1.8823977, -0.6798799, -2.461983)
amount = 32
lifetime = 0.2
process_material = SubResource("ParticleProcessMaterial_4geug")
draw_pass_1 = SubResource("CylinderMesh_iqs6a")

[node name="GPUParticles3D3" type="GPUParticles3D" parent="ship_body/engine_trails"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 3.713419, -0.6861876, -0.8689587)
amount = 32
lifetime = 0.2
process_material = SubResource("ParticleProcessMaterial_4geug")
draw_pass_1 = SubResource("CylinderMesh_iqs6a")

[node name="GPUParticles3D4" type="GPUParticles3D" parent="ship_body/engine_trails"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 1.8813672, -0.67987996, -2.677441)
amount = 64
lifetime = 0.2
process_material = SubResource("ParticleProcessMaterial_4geug")
draw_pass_1 = SubResource("CylinderMesh_iqs6a")

[node name="warp_particles" type="GPUParticles3D" parent="ship_body"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0, 0)
emitting = false
amount = 300
local_coords = true
process_material = SubResource("ParticleProcessMaterial_a061m")
draw_pass_1 = SubResource("CylinderMesh_g2y22")

[node name="rotation_pivot" type="Node3D" parent="."]

[node name="camera" type="Camera3D" parent="rotation_pivot"]
transform = Transform3D(1, 0, 0, 0, 0.99254614, 0.12186935, 0, -0.12186935, 0.99254614, 0, 9, 19)

[node name="dock_arrow" type="Node3D" parent="rotation_pivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, -5)

[node name="mesh_point" type="MeshInstance3D" parent="rotation_pivot/dock_arrow"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0, 0)
mesh = SubResource("CylinderMesh_a061m")

[node name="mesh_stick" type="MeshInstance3D" parent="rotation_pivot/dock_arrow"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 1.926733)
mesh = SubResource("CapsuleMesh_g2y22")
